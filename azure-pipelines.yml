trigger:
- main  # Change to your main branch

pool:
  vmImage: 'ubuntu-latest'

steps:
- checkout: self

- task: UsePythonVersion@0
  inputs:
    versionSpec: '3.x'

- script: |
    echo "ðŸ” Checking if PATs are set..."
    echo "ðŸ” AZURE_DEVOPS_PAT length: ${#AZURE_DEVOPS_PAT}"  # Ensure this prints a number > 0
    export AZURE_DEVOPS_PAT=${AZURE_DEVOPS_PAT}  # âœ… Explicitly export the variable
    export GITHUB_PAT=${GITHUB_PAT}
    python -m pip install --upgrade pip
    python sync_to_github.py
  env:
    AZURE_DEVOPS_PAT: $(AZURE_DEVOPS_PAT)  # âœ… Ensure secrets are passed
    GITHUB_PAT: $(GITHUB_PAT)
  displayName: "Run Python Sync Script"
