trigger:
- main  # Change to your branch

pool:
  vmImage: 'ubuntu-latest'

variables:
- group: PAT_TOKENS  # ✅ Ensure secrets are pulled from Azure DevOps Library

steps:
- script: |
    # ✅ Explicitly export the variables
    export AZURE_DEVOPS_PAT="${AZURE_DEVOPS_PAT}"
    export GITHUB_PAT="${GITHUB_PAT}"

    python -m pip install --upgrade pip
    python sync_to_github.py
  env:
    AZURE_DEVOPS_PAT: $(AZURE_DEVOPS_PAT)  # ✅ Ensures secret is passed correctly
    GITHUB_PAT: $(GITHUB_PAT)
  displayName: "Run Python Sync Script"